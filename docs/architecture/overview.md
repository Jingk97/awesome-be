# GoFast æ¡†æ¶æ•´ä½“æ¶æ„

## æ¶æ„æ¦‚è¿°

GoFast æ˜¯ä¸€ä¸ªåŸºäº Gin æ¡†æ¶çš„é€šç”¨ Web åº”ç”¨æ¡†æ¶ï¼Œé‡‡ç”¨**åˆ†å±‚æ¶æ„**å’Œ**ä¾èµ–æ³¨å…¥**è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºé«˜è´¨é‡ã€å¯ç»´æŠ¤çš„ Go åº”ç”¨ã€‚

### è®¾è®¡ç›®æ ‡

- ğŸ¯ **ç®€å•æ˜“ç”¨** - é™ä½å­¦ä¹ æˆæœ¬ï¼Œå¿«é€Ÿä¸Šæ‰‹
- ğŸ”§ **æ¨¡å—åŒ–** - å„æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- ğŸš€ **é«˜æ€§èƒ½** - å……åˆ†åˆ©ç”¨ Go çš„å¹¶å‘ç‰¹æ€§
- ğŸ”’ **å®‰å…¨å¯é ** - å†…ç½®å®‰å…¨æœ€ä½³å®è·µ
- ğŸ“¦ **å¯æ‰©å±•** - é¢„ç•™æ‰©å±•æ¥å£ï¼Œæ”¯æŒè‡ªå®šä¹‰
- ğŸŒ **å¾®æœåŠ¡å‹å¥½** - æ”¯æŒå•ä½“åº”ç”¨å’Œå¾®æœåŠ¡æ¶æ„

## æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| HTTP æ¡†æ¶ | Gin | é«˜æ€§èƒ½ HTTP æ¡†æ¶ |
| RPC æ¡†æ¶ | gRPC | å¾®æœåŠ¡é€šä¿¡ |
| ORM | GORM | æ•°æ®åº“æ“ä½œ |
| é…ç½®ç®¡ç† | Viper | é…ç½®åŠ è½½å’Œçƒ­æ›´æ–° |
| æ—¥å¿— | Zap | é«˜æ€§èƒ½ç»“æ„åŒ–æ—¥å¿— |
| ä¾èµ–æ³¨å…¥ | Wire | ç¼–è¯‘æ—¶ä¾èµ–æ³¨å…¥ |
| ç¼“å­˜ | Redis | åˆ†å¸ƒå¼ç¼“å­˜ |
| è®¤è¯ | JWT | æ— çŠ¶æ€è®¤è¯ |

## æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯å±‚                              â”‚
â”‚                  (Web/Mobile/Third-party)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¼ è¾“å±‚ (Transport)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   HTTP Server    â”‚              â”‚   gRPC Server    â”‚    â”‚
â”‚  â”‚     (Gin)        â”‚              â”‚                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ä¸­é—´ä»¶å±‚ (Middleware)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ—¥å¿— â”‚ â”‚ æ¢å¤ â”‚ â”‚ CORS â”‚ â”‚ è®¤è¯ â”‚ â”‚ é™æµ â”‚ â”‚ è¿½è¸ª â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ§åˆ¶å™¨å±‚ (Handler/Controller)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å‚æ•°éªŒè¯ â†’ è°ƒç”¨ Service â†’ æ„é€ å“åº”                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœåŠ¡å±‚ (Service)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä¸šåŠ¡é€»è¾‘ â†’ äº‹åŠ¡ç®¡ç† â†’ è°ƒç”¨ Repository                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®è®¿é—®å±‚ (Repository)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ•°æ®åº“æ“ä½œ â†’ ç¼“å­˜æ“ä½œ â†’ è¯»å†™åˆ†ç¦»                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åŸºç¡€è®¾æ–½å±‚ (Infrastructure)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MySQL   â”‚  â”‚ Postgres â”‚  â”‚  Redis   â”‚  â”‚   MQ     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒè®¾è®¡æ¨¡å¼

### 1. åˆ†å±‚æ¶æ„ (Layered Architecture)

å°†åº”ç”¨åˆ†ä¸ºå¤šä¸ªå±‚æ¬¡ï¼Œæ¯å±‚æœ‰æ˜ç¡®çš„èŒè´£ï¼š

```
Handler â†’ Service â†’ Repository â†’ Database
```

**ä¼˜åŠ¿**ï¼š
- èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
- å±‚ä¸å±‚ä¹‹é—´ä½è€¦åˆ
- ä¾¿äºå•å…ƒæµ‹è¯•
- æ”¯æŒæ°´å¹³æ‰©å±•

### 2. ä¾èµ–æ³¨å…¥ (Dependency Injection)

ä½¿ç”¨ Wire è¿›è¡Œç¼–è¯‘æ—¶ä¾èµ–æ³¨å…¥ï¼š

```go
// å®šä¹‰ä¾èµ–å…³ç³»
wire.Build(
    NewConfig,
    NewLogger,
    NewDB,
    NewUserRepo,
    NewUserService,
    NewUserHandler,
)
```

**ä¼˜åŠ¿**ï¼š
- è§£è€¦ç»„ä»¶ä¾èµ–
- ä¾¿äºå•å…ƒæµ‹è¯•ï¼ˆå¯æ³¨å…¥ Mockï¼‰
- ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œç±»å‹å®‰å…¨
- æ— è¿è¡Œæ—¶åå°„ï¼Œæ€§èƒ½ä¼˜ç§€

### 3. ä»“å‚¨æ¨¡å¼ (Repository Pattern)

å°†æ•°æ®è®¿é—®é€»è¾‘å°è£…åœ¨ Repository å±‚ï¼š

```go
type UserRepository interface {
    Create(ctx context.Context, user *User) error
    FindByID(ctx context.Context, id int64) (*User, error)
    Update(ctx context.Context, user *User) error
    Delete(ctx context.Context, id int64) error
}
```

**ä¼˜åŠ¿**ï¼š
- æ•°æ®è®¿é—®é€»è¾‘é›†ä¸­ç®¡ç†
- ä¾¿äºåˆ‡æ¢æ•°æ®æºï¼ˆMySQL â†’ PostgreSQLï¼‰
- æ”¯æŒè¯»å†™åˆ†ç¦»
- ä¾¿äºæ·»åŠ ç¼“å­˜å±‚

### 4. ä¸­é—´ä»¶æ¨¡å¼ (Middleware Pattern)

ä½¿ç”¨ä¸­é—´ä»¶å¤„ç†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼š

```go
router.Use(
    middleware.Logger(),
    middleware.Recovery(),
    middleware.CORS(),
    middleware.Auth(),
)
```

**ä¼˜åŠ¿**ï¼š
- å…³æ³¨ç‚¹åˆ†ç¦»
- å¯å¤ç”¨
- æ˜“äºç»„åˆ
- ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç 

## è¯·æ±‚å¤„ç†æµç¨‹

### HTTP è¯·æ±‚å®Œæ•´æµç¨‹

```
1. å®¢æˆ·ç«¯å‘èµ· HTTP è¯·æ±‚
   â†“
2. Gin è·¯ç”±åŒ¹é…
   â†“
3. ä¸­é—´ä»¶é“¾å¤„ç†
   - æ—¥å¿—è®°å½•ï¼ˆè¯·æ±‚å¼€å§‹ï¼‰
   - Panic æ¢å¤
   - CORS å¤„ç†
   - JWT è®¤è¯
   - æƒé™æ£€æŸ¥
   - é“¾è·¯è¿½è¸ª
   â†“
4. Handler å±‚
   - å‚æ•°ç»‘å®šå’ŒéªŒè¯
   - è°ƒç”¨ Service å±‚
   - æ„é€ å“åº”
   â†“
5. Service å±‚
   - ä¸šåŠ¡é€»è¾‘å¤„ç†
   - äº‹åŠ¡ç®¡ç†
   - è°ƒç”¨ Repository å±‚
   â†“
6. Repository å±‚
   - è¯»å†™åˆ†ç¦»è·¯ç”±
   - ç¼“å­˜æŸ¥è¯¢ï¼ˆå¯é€‰ï¼‰
   - æ•°æ®åº“æ“ä½œ
   - ç¼“å­˜æ›´æ–°ï¼ˆå¯é€‰ï¼‰
   â†“
7. è¿”å›å“åº”
   - ç»Ÿä¸€å“åº”æ ¼å¼
   - é”™è¯¯ç æ˜ å°„
   - æ—¥å¿—è®°å½•ï¼ˆè¯·æ±‚ç»“æŸï¼‰
```

### ç¤ºä¾‹ä»£ç æµç¨‹

```go
// 1. Handler å±‚ - æ¥æ”¶è¯·æ±‚
func (h *UserHandler) GetUser(c *gin.Context) {
    id := c.Param("id")

    // è°ƒç”¨ Service
    user, err := h.userService.GetByID(c.Request.Context(), id)
    if err != nil {
        response.Error(c, err)
        return
    }

    response.Success(c, user)
}

// 2. Service å±‚ - ä¸šåŠ¡é€»è¾‘
func (s *UserService) GetByID(ctx context.Context, id string) (*User, error) {
    // å‚æ•°éªŒè¯
    userID, err := strconv.ParseInt(id, 10, 64)
    if err != nil {
        return nil, errors.ErrInvalidParams
    }

    // è°ƒç”¨ Repository
    user, err := s.userRepo.FindByID(ctx, userID)
    if err != nil {
        return nil, err
    }

    // ä¸šåŠ¡é€»è¾‘å¤„ç†
    // ...

    return user, nil
}

// 3. Repository å±‚ - æ•°æ®è®¿é—®
func (r *UserRepository) FindByID(ctx context.Context, id int64) (*User, error) {
    // å…ˆæŸ¥ç¼“å­˜
    if user := r.cache.Get(ctx, id); user != nil {
        return user, nil
    }

    // æŸ¥æ•°æ®åº“ï¼ˆè‡ªåŠ¨è¯»å†™åˆ†ç¦»ï¼‰
    var user User
    err := r.db.WithContext(ctx).First(&user, id).Error
    if err != nil {
        return nil, err
    }

    // å†™å…¥ç¼“å­˜
    r.cache.Set(ctx, id, &user)

    return &user, nil
}
```

## åº”ç”¨å¯åŠ¨æµç¨‹

```
1. åŠ è½½é…ç½® (Viper)
   - è¯»å–é…ç½®æ–‡ä»¶
   - åŠ è½½ç¯å¢ƒå˜é‡
   - è§£æå‘½ä»¤è¡Œå‚æ•°
   â†“
2. åˆå§‹åŒ–æ—¥å¿— (Zap)
   - è®¾ç½®æ—¥å¿—çº§åˆ«
   - é…ç½®è¾“å‡ºæ ¼å¼
   - è®¾ç½®æ—¥å¿—æ–‡ä»¶
   â†“
3. åˆå§‹åŒ–æ•°æ®åº“ (GORM)
   - å»ºç«‹æ•°æ®åº“è¿æ¥
   - é…ç½®è¿æ¥æ± 
   - è®¾ç½®è¯»å†™åˆ†ç¦»
   â†“
4. åˆå§‹åŒ– Redis
   - å»ºç«‹ Redis è¿æ¥
   - é…ç½®è¿æ¥æ± 
   â†“
5. ä¾èµ–æ³¨å…¥ (Wire)
   - æ„å»ºæ‰€æœ‰ç»„ä»¶
   - æ³¨å…¥ä¾èµ–å…³ç³»
   â†“
6. æ³¨å†Œè·¯ç”±
   - æ³¨å†Œä¸­é—´ä»¶
   - æ³¨å†Œ HTTP è·¯ç”±
   - æ³¨å†Œ gRPC æœåŠ¡
   â†“
7. å¯åŠ¨æœåŠ¡
   - å¯åŠ¨ HTTP Server
   - å¯åŠ¨ gRPC Server
   - ç›‘å¬ç³»ç»Ÿä¿¡å·
   â†“
8. ä¼˜é›…å…³é—­
   - åœæ­¢æ¥æ”¶æ–°è¯·æ±‚
   - ç­‰å¾…ç°æœ‰è¯·æ±‚å®Œæˆ
   - å…³é—­æ•°æ®åº“è¿æ¥
   - å…³é—­ Redis è¿æ¥
```

## ç›®å½•ç»“æ„

```
gofast/
â”œâ”€â”€ cmd/                          # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ http/                     # HTTP æœåŠ¡å…¥å£
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â””â”€â”€ grpc/                     # gRPC æœåŠ¡å…¥å£
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/                     # ç§æœ‰ä»£ç ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ handler/                  # HTTP/gRPC å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ http/
â”‚   â”‚   â”‚   â””â”€â”€ user_handler.go
â”‚   â”‚   â””â”€â”€ grpc/
â”‚   â”‚       â””â”€â”€ user_service.go
â”‚   â”œâ”€â”€ service/                  # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â””â”€â”€ user_service.go
â”‚   â”œâ”€â”€ repository/               # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â””â”€â”€ user_repository.go
â”‚   â”œâ”€â”€ model/                    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.go
â”‚   â””â”€â”€ middleware/               # ä¸­é—´ä»¶
â”‚       â”œâ”€â”€ logger.go
â”‚       â”œâ”€â”€ recovery.go
â”‚       â”œâ”€â”€ cors.go
â”‚       â””â”€â”€ auth.go
â”œâ”€â”€ pkg/                          # å¯å¤ç”¨çš„å…¬å…±åº“
â”‚   â”œâ”€â”€ config/                   # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ logger/                   # æ—¥å¿—å°è£…
â”‚   â”œâ”€â”€ database/                 # æ•°æ®åº“å°è£…
â”‚   â”‚   â”œâ”€â”€ mysql/
â”‚   â”‚   â”œâ”€â”€ postgres/
â”‚   â”‚   â””â”€â”€ manager.go
â”‚   â”œâ”€â”€ cache/                    # ç¼“å­˜å°è£…
â”‚   â”œâ”€â”€ response/                 # ç»Ÿä¸€å“åº”
â”‚   â”œâ”€â”€ errors/                   # é”™è¯¯ç å®šä¹‰
â”‚   â”œâ”€â”€ jwt/                      # JWT è®¤è¯
â”‚   â”œâ”€â”€ transaction/              # äº‹åŠ¡ç®¡ç†å™¨
â”‚   â””â”€â”€ validator/                # å‚æ•°éªŒè¯
â”œâ”€â”€ api/                          # API å®šä¹‰
â”‚   â”œâ”€â”€ http/                     # HTTP è·¯ç”±
â”‚   â”‚   â””â”€â”€ router.go
â”‚   â””â”€â”€ grpc/                     # gRPC proto
â”‚       â””â”€â”€ user.proto
â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml
â”‚   â”œâ”€â”€ config.dev.yaml
â”‚   â”œâ”€â”€ config.test.yaml
â”‚   â””â”€â”€ config.prod.yaml
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”œâ”€â”€ scripts/                      # è„šæœ¬
â”œâ”€â”€ tests/                        # æµ‹è¯•
â”œâ”€â”€ wire.go                       # Wire ä¾èµ–æ³¨å…¥å®šä¹‰
â”œâ”€â”€ wire_gen.go                   # Wire ç”Ÿæˆæ–‡ä»¶
â”œâ”€â”€ go.mod
â””â”€â”€ go.sum
```

## æ ¸å¿ƒç‰¹æ€§

### 1. å¤šæ•°æ®åº“æ”¯æŒ

æ”¯æŒåŒæ—¶è¿æ¥å¤šä¸ªæ•°æ®åº“å®ä¾‹ï¼š

```yaml
databases:
  - name: "main"      # ä¸»ä¸šåŠ¡æ•°æ®åº“
    type: "mysql"
  - name: "log"       # æ—¥å¿—æ•°æ®åº“
    type: "postgres"
  - name: "analytics" # åˆ†ææ•°æ®åº“
    type: "mysql"
```

### 2. è¯»å†™åˆ†ç¦»

è‡ªåŠ¨è·¯ç”±è¯»å†™è¯·æ±‚åˆ°ä¸åŒçš„æ•°æ®åº“å®ä¾‹ï¼š

```go
// å†™æ“ä½œ â†’ ä¸»åº“
db.Create(&user)

// è¯»æ“ä½œ â†’ ä»åº“ï¼ˆè‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼‰
db.First(&user, id)
```

### 3. é…ç½®çƒ­æ›´æ–°

æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ›´æ–°é…ç½®ï¼ˆéƒ¨åˆ†é…ç½®ï¼‰ï¼š

```yaml
# ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Œæ— éœ€é‡å¯
logger:
  level: "debug"  # info â†’ debug
```

### 4. ç»Ÿä¸€é”™è¯¯å¤„ç†

ç»Ÿä¸€çš„é”™è¯¯ç å’Œå“åº”æ ¼å¼ï¼š

```json
{
  "code": 400001,
  "message": "invalid params",
  "trace_id": "abc123"
}
```

### 5. JWT è®¤è¯

æ— çŠ¶æ€çš„ JWT è®¤è¯æœºåˆ¶ï¼š

```go
// ç”Ÿæˆ Token
token, err := jwt.GenerateToken(userID, username)

// éªŒè¯ Tokenï¼ˆä¸­é—´ä»¶è‡ªåŠ¨å¤„ç†ï¼‰
router.Use(middleware.Auth())
```

### 6. é“¾è·¯è¿½è¸ª

è‡ªåŠ¨ç”Ÿæˆå’Œä¼ é€’ Trace IDï¼š

```
Request â†’ [Trace-ID: abc123] â†’ Service A â†’ Service B â†’ Database
```

## æ‰©å±•æ€§è®¾è®¡

### 1. æ•°æ®åº“æ‰©å±•

æ·»åŠ æ–°çš„æ•°æ®åº“ç±»å‹ï¼ˆå¦‚ MongoDBï¼‰ï¼š

```go
// å®ç° Database æ¥å£
type MongoDB struct {
    client *mongo.Client
}

func (m *MongoDB) Connect() error { ... }
func (m *MongoDB) Close() error { ... }
```

### 2. ç¼“å­˜æ‰©å±•

æ·»åŠ æ–°çš„ç¼“å­˜å®ç°ï¼ˆå¦‚ Memcachedï¼‰ï¼š

```go
// å®ç° Cache æ¥å£
type Memcached struct {
    client *memcache.Client
}

func (m *Memcached) Get(key string) (interface{}, error) { ... }
func (m *Memcached) Set(key string, value interface{}) error { ... }
```

### 3. ä¸­é—´ä»¶æ‰©å±•

æ·»åŠ è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼š

```go
func CustomMiddleware() gin.HandlerFunc {
    return func(c *gin.Context) {
        // å‰ç½®å¤„ç†
        c.Next()
        // åç½®å¤„ç†
    }
}
```

## æ€§èƒ½ä¼˜åŒ–

### 1. è¿æ¥æ± ç®¡ç†

- æ•°æ®åº“è¿æ¥æ± 
- Redis è¿æ¥æ± 
- HTTP è¿æ¥å¤ç”¨

### 2. ç¼“å­˜ç­–ç•¥

- å¤šçº§ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ + Redisï¼‰
- ç¼“å­˜é¢„çƒ­
- ç¼“å­˜ç©¿é€/å‡»ç©¿/é›ªå´©é˜²æŠ¤

### 3. å¹¶å‘æ§åˆ¶

- Goroutine æ± 
- é™æµ
- ç†”æ–­

### 4. æ•°æ®åº“ä¼˜åŒ–

- è¯»å†™åˆ†ç¦»
- ç´¢å¼•ä¼˜åŒ–
- æ…¢æŸ¥è¯¢ç›‘æ§

## å®‰å…¨æ€§

### 1. è®¤è¯æˆæƒ

- JWT è®¤è¯
- RBAC æƒé™æ§åˆ¶
- API å¯†é’¥ç®¡ç†

### 2. æ•°æ®å®‰å…¨

- æ•æ„Ÿæ•°æ®åŠ å¯†
- SQL æ³¨å…¥é˜²æŠ¤ï¼ˆGORM è‡ªåŠ¨å¤„ç†ï¼‰
- XSS é˜²æŠ¤

### 3. ä¼ è¾“å®‰å…¨

- HTTPS/TLS
- gRPC TLS
- è¯·æ±‚ç­¾å

## ç›‘æ§å’Œè¿ç»´

### 1. æ—¥å¿—

- ç»“æ„åŒ–æ—¥å¿—
- æ—¥å¿—åˆ†çº§
- æ—¥å¿—èšåˆ

### 2. æŒ‡æ ‡

- è¯·æ±‚ QPS
- å“åº”æ—¶é—´
- é”™è¯¯ç‡
- æ•°æ®åº“è¿æ¥æ•°

### 3. å¥åº·æ£€æŸ¥

- HTTP å¥åº·æ£€æŸ¥ç«¯ç‚¹
- æ•°æ®åº“è¿æ¥æ£€æŸ¥
- Redis è¿æ¥æ£€æŸ¥

### 4. ä¼˜é›…å…³é—­

- åœæ­¢æ¥æ”¶æ–°è¯·æ±‚
- ç­‰å¾…ç°æœ‰è¯·æ±‚å®Œæˆ
- å…³é—­æ‰€æœ‰è¿æ¥

## ä¸‹ä¸€æ­¥

- ğŸ“– é˜…è¯» [åˆ†å±‚è®¾è®¡è¯¦è§£](./layers.md)
- ğŸ“– é˜…è¯» [é…ç½®æ¨¡å—æ–‡æ¡£](../phase-1-infrastructure/01-config.md)
- ğŸ’» æŸ¥çœ‹ [å®Œæ•´ç¤ºä¾‹](../examples/crud-example.md)
